<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Commerce Experiment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 700px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #333;
            font-size: 26px;
            margin-bottom: 20px;
            text-align: center;
        }

        .intro-text {
            color: #555;
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .intro-text strong {
            color: #667eea;
        }

        .highlight-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 25px 0;
            border-radius: 5px;
        }

        .highlight-box p {
            margin-bottom: 10px;
            color: #555;
            line-height: 1.6;
        }

        .highlight-box p:last-child {
            margin-bottom: 0;
        }

        .start-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .start-button:active {
            transform: translateY(0);
        }

        .footer-note {
            text-align: center;
            color: #888;
            font-size: 14px;
            margin-top: 20px;
            font-style: italic;
        }

        @media (max-width: 600px) {
            .container {
                padding: 30px 25px;
            }

            h1 {
                font-size: 22px;
            }

            .intro-text {
                font-size: 15px;
            }

            .start-button {
                padding: 15px 40px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>E-Commerce Experiment</h1>
        
        <p class="intro-text">
            Diese Studie untersucht Entscheidungsprozesse in einem simulierten Online-Shop. 
            Die Teilnahme dauert etwa <strong>5‚Äì7 Minuten</strong>. Alle Antworten werden anonym 
            erhoben und ausschlie√ülich zu wissenschaftlichen Zwecken verwendet.
        </p>

        <div class="highlight-box">
            <p><strong>Willkommen und vielen Dank f√ºr Ihre Teilnahme!</strong></p>
            <p>
                In dieser Studie werden Sie gebeten, eine kurze Aufgabe in einem simulierten 
                Online-Shop zu bearbeiten und anschlie√üend einige Fragen zu beantworten.
            </p>
            <p>
                Es gibt keine richtigen oder falschen Antworten. Bitte beantworten Sie alle 
                Fragen spontan und ehrlich.
            </p>
            <p>
                Die Teilnahme ist freiwillig und anonym. Sie k√∂nnen die Studie jederzeit abbrechen.
            </p>
        </div>

        <button class="start-button" onclick="startExperiment()">Test starten</button>

        <p class="footer-note">
            Klicken Sie auf ‚ÄûTest starten", um mit dem Experiment zu beginnen.
        </p>
    </div>

    <script>
        function startExperiment() {
            // ====== PROLIFIC INTEGRATION ======
            // –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL (–µ—Å–ª–∏ –µ—Å—Ç—å)
            const urlParams = new URLSearchParams(window.location.search);
            const prolificPID = urlParams.get('PROLIFIC_PID') || urlParams.get('prolific_pid');
            const studyID = urlParams.get('STUDY_ID') || urlParams.get('study_id');
            const sessionID = urlParams.get('SESSION_ID') || urlParams.get('session_id');
            
            // ====== –ì–ï–ù–ï–†–ê–¶–ò–Ø PARTICIPANT ID ======
            let participantId;
            
            if (prolificPID) {
                // –ï—Å–ª–∏ —ç—Ç–æ Prolific —É—á–∞—Å—Ç–Ω–∏–∫ - –∏—Å–ø–æ–ª—å–∑—É–µ–º Prolific PID
                participantId = prolificPID;
                console.log('‚úÖ Prolific participant detected');
                console.log('üÜî Prolific PID:', prolificPID);
                console.log('üìö Study ID:', studyID);
                console.log('üîë Session ID:', sessionID);
            } else {
                // –ï—Å–ª–∏ –ù–ï Prolific (–ª–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–≤–æ–π ID
                const timestamp = Date.now();
                const randomStr = Math.random().toString(36).substring(2, 8);
                participantId = `P${timestamp}_${randomStr}`;
                console.log('‚ÑπÔ∏è Local testing mode (no Prolific PID)');
                console.log('üÜî Generated Participant ID:', participantId);
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ sessionStorage
            sessionStorage.setItem('participantId', participantId);
            if (prolificPID) {
                sessionStorage.setItem('prolificPID', prolificPID);
                sessionStorage.setItem('studyID', studyID);
                sessionStorage.setItem('sessionID', sessionID);
            }
            
            // ====== –°–°–´–õ–ö–ò –ù–ê –í–ê–®–ò 4 –°–¢–†–ê–ù–ò–¶–´ ======
            // ‚ö†Ô∏è –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –í–ê–®–ò —Ä–µ–∞–ª—å–Ω—ã–µ URL!
            const experimentPages = [
                {
                    url: 'control.html',
                    group: 'control',
                    groupId: 1
                },
                {
                    url: 'socialproof.html',
                    group: 'socialproof',
                    groupId: 2
                },
                {
                    url: 'scarcity.html',
                    group: 'scarcity',
                    groupId: 3
                },
                {
                    url: 'both.html',
                    group: 'both',
                    groupId: 4
                }
            ];

            // ====== –°–õ–£–ß–ê–ô–ù–´–ô –í–´–ë–û–† –°–¢–†–ê–ù–ò–¶–´ ======
            const randomIndex = Math.floor(Math.random() * experimentPages.length);
            const selectedPage = experimentPages[randomIndex];

            // ====== –§–û–†–ú–ò–†–£–ï–ú URL –° –ü–ê–†–ê–ú–ï–¢–†–ê–ú–ò ======
            let experimentURL = `${selectedPage.url}?participantId=${participantId}&group=${selectedPage.group}&groupId=${selectedPage.groupId}`;
            
            // –î–æ–±–∞–≤–ª—è–µ–º Prolific –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –µ—Å–ª–∏ –µ—Å—Ç—å
            if (prolificPID) {
                experimentURL += `&prolificPID=${prolificPID}`;
            }
            if (studyID) {
                experimentURL += `&studyID=${studyID}`;
            }
            if (sessionID) {
                experimentURL += `&sessionID=${sessionID}`;
            }

            // ====== –û–¢–õ–ê–î–ö–ê (–≤–∏–¥–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ F12) ======
            console.log('üé≤ Selected group:', selectedPage.group);
            console.log('üî¢ Group ID:', selectedPage.groupId);
            console.log('üîó Redirecting to:', experimentURL);

            // ====== –ü–ï–†–ï–•–û–î –ù–ê –í–´–ë–†–ê–ù–ù–£–Æ –°–¢–†–ê–ù–ò–¶–£ ======
            window.location.href = experimentURL;
        }
    </script>
</body>
</html>
